<div class="container my-4">
  <div class="bg-padrao text-white p-4">
    <div class="d-flex justify-content-between align-items-start">
      <div>
        <img src="pokeball.png" alt="Pokeball" class="pokeball-image" />
        <h1 class="fw-bold" style="font-size: 1.8rem">Pokédex Digital</h1>
        <p>
          Explore o mundo dos Pokémon com nossa Pokédex interativa. Descubra informações detalhadas
          sobre cada monstrinho.
        </p>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-primary" (click)="irParaFavoritos()">
          <lucide-icon [img]="Sparkles" [size]="16" class="me-2"></lucide-icon> Favoritos
        </button>
        <button class="btn btn-primary" (click)="irParaGrupo()">
          <lucide-icon [img]="Swords" [size]="16" class="me-2"></lucide-icon> Meu Grupo de Batalha
        </button>
      </div>
    </div>
  </div>

  <div class="p-3 text-black" style="border-radius: 0 0 8px 8px">
    <div class="d-flex gap-4">
      <div>
        <strong>{{ totalCount }}</strong> Pokémons
      </div>
      <div><strong>18</strong> Tipos</div>
      <div><strong>9</strong> Gerações</div>
    </div>

    <div class="mt-4 mb-4"><h4>Pokémons Descobertos</h4></div>

    <!-- Lista dinâmica de botões de tipo -->
    <div class="d-flex flex-wrap gap-2 mt-3 mb-4">
      <button class="btn btn-primary" (click)="limparFiltros()">Todos os Tipos</button>

      <button
        *ngFor="let tipo of tiposPokemon"
        [ngClass]="
          activeFilter === tipo
            ? 'btn btn-sm text-white ' +
              typeMapper.tipoClasses[typeMapper.traduzirParaPt(tipo).toLowerCase()]
            : 'btn btn-sm btn-outline-' + obterCorBasica(tipo)
        "
        (click)="buscarPorTipo(tipo)"
      >
        {{ typeMapper.traduzirParaPt(tipo) }}
      </button>
    </div>

    <div class="row g-2">
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="Buscar por nome..."
          [(ngModel)]="search"
          (keyup.enter)="buscarPorNome()"
        />
      </div>
      <div class="col-md-4">
        <select class="form-select" [(ngModel)]="selectedGen" (change)="filtrarPorGeracao()">
          <option value="">Todas as gerações</option>
          <option *ngFor="let g of [1, 2, 3, 4, 5, 6, 7, 8, 9]" [value]="g">Geração {{ g }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div
    *ngIf="loading"
    class="text-center"
    style="
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    "
  >
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem">
      <span class="visually-hidden">Carregando...</span>
    </div>
    <p class="mt-3 text-muted">Carregando pokémons...</p>
  </div>

  <!-- Erro -->
  <div *ngIf="error && !loading" class="alert alert-danger text-center my-4">{{ error }}</div>

  <!-- Lista de Pokémon -->
  <div *ngIf="!loading && !error" class="row mt-4">
    <div *ngFor="let p of pokemons" class="col-12 col-sm-6 col-lg-4 mb-4">
      <app-pokemon-card [pokemon]="p" [showStats]="true"></app-pokemon-card>
    </div>
  </div>

  <!-- Paginação -->
  <div *ngIf="!loading" class="d-flex justify-content-center align-items-center mt-3 gap-3">
    <button
      class="btn btn-outline-primary"
      (click)="mudarPagina(-1)"
      [disabled]="currentPage === 1"
    >
      ‹ Anterior
    </button>
    <span>Página {{ currentPage }} de {{ totalCount / limit | number : '1.0-0' }}</span>
    <button
      class="btn btn-outline-primary"
      (click)="mudarPagina(1)"
      [disabled]="currentPage * limit >= totalCount"
    >
      Próxima ›
    </button>
  </div>
</div>
